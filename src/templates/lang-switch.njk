{% for language in site.languages %}

  {% if loop.first %}
    <div class="language-switch">
    {% endif %}

    {# default: set to home #}
    {% set translatedUrl = "/" + language.code + "/" %}
    {% set activeClass = "is-active" if language.code == locale else "" %}

    {% for item in collections[tags] %}
      {% if not item.data.partial %}
        {% if item.data.locale == language.code %}
          {% set translatedUrl = item.url %}
        {% endif %}
      {% endif %}
    {% endfor %}

    <a class="{{ activeClass }} " href="{{ translatedUrl }}">
      <div class="language-switch__item">
        <img src="/_assets/flags/{{language.code}}.svg" alt="{{ language.label }}" class="language-switch__flag"/>
        <span class"language-switch__label">
          {{ language.label }}
        </span>
      </div>
    </a>

    {% if loop.last %}
    </div>
  {% endif %}
{% endfor %}

<style>
  .language-switch__item {
    display: flex;
    align-items: center;
    {# border: 1px solid grey; #}
    {# padding: 0.8rem; #}
  }
  .language-switch__label {
    {# padding-right: 1rem; #}
  }
  .language-switch__flag {
    width: 2.1rem;
    margin-right: 0.8rem;
  }
</style>